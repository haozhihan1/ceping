# Supervisor配置文件 - 员工能力测评系统
# 文件位置: /etc/supervisord.d/flask_app.ini

[program:employee_assessment]
; 程序基础配置
command=/home/www/flask_project/venv/bin/gunicorn --config /home/www/flask_project/gunicorn.conf.py production_app:create_app()
directory=/home/www/flask_project
user=www
group=www

; 环境变量
environment=PATH="/home/www/flask_project/venv/bin:%(ENV_PATH)s",PYTHONPATH="/home/www/flask_project"

; 启动配置
autostart=true
autorestart=true
startretries=3
startsecs=10

; 日志配置
stdout_logfile=/var/log/supervisor/flask_app_stdout.log
stderr_logfile=/var/log/supervisor/flask_app_stderr.log
stdout_logfile_maxbytes=50MB
stderr_logfile_maxbytes=50MB
stdout_logfile_backups=5
stderr_logfile_backups=5

; 进程管理
killasgroup=true
stopasgroup=true
priority=999

; 资源限制
numprocs=1
process_name=%(program_name)s_%(process_num)02d

; 信号处理
stopsignal=QUIT
stopwaitsecs=30

[group:web_services]
programs=employee_assessment
priority=999
